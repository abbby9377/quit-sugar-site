<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>戒糖計畫｜Quit Sugar</title>
  <meta name="description" content="簡單開始的戒糖網站：註冊登入、追蹤連勝、健康行動清單與每日激勵。" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
  /* ===== 視覺主題（女性友善、柔和色調） ===== */
  :root {
    --bg:#ffffff; --card:#ffffff; --muted:#475569; --text:#0f172a;
    --brand:#ec4899; --brand-2:#f472b6; --brand-3:#fb7185;
    --accent:#fdf2f8; --line:#e5e7eb; --danger:#ef4444;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:'Noto Sans TC',system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
  .wrap{max-width:980px;margin:0 auto;padding:32px 20px 80px}
  header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:12px}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,var(--brand-2),var(--brand-3));display:grid;place-items:center;color:#fff;font-weight:900}
  h1{margin:0;font-size:24px;letter-spacing:0.5px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:18px;padding:18px;box-shadow:0 6px 20px rgba(236,72,153,.08)}
  .grid{display:grid;gap:16px}
  @media(min-width:960px){.grid{grid-template-columns:1.1fr 1fr}}
  h2{font-size:20px;margin:0 0 10px}
  h3{font-size:18px;margin:16px 0 8px}
  p,li,small{color:var(--muted)}
  input,button{font:inherit}
  input{width:100%;background:#fff;border:1px solid #d1d5db;padding:10px 12px;border-radius:12px;color:var(--text)}
  .row{display:grid;gap:10px}
  .row2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);padding:12px 16px;border-radius:999px;background:#f8fafc;color:var(--text);cursor:pointer;white-space:nowrap}
  .btn.primary{background:linear-gradient(135deg,var(--brand-2),var(--brand));color:#fff;border:none;font-weight:700}
  .btn.ghost{background:transparent}
  .btn.danger{background:linear-gradient(135deg,#ef4444,#b91c1c);border:none;color:#fff}
  .stat{display:flex;gap:14px;align-items:center}
  .stat .num{font-size:28px;font-weight:800}
  .kicker{display:inline-block;padding:4px 10px;border-radius:999px;background:#fff;border:1px solid var(--line);color:var(--brand);font-size:12px;font-weight:700}
  .list{display:grid;gap:8px}
  .todo{display:flex;align-items:center;gap:10px}
  .todo input[type=checkbox]{width:18px;height:18px}
  .muted{color:var(--muted)}
  .error{border-left:3px solid var(--danger);padding:10px 12px;background:#fff5f5;border-radius:12px}
  footer{margin-top:28px;text-align:center;color:var(--muted)}
  code{background:#f1f5f9;padding:2px 6px;border-radius:6px;border:1px solid var(--line)}
  hr{border-color:var(--line)}
  nav.top-nav{display:flex;gap:16px;align-items:center;padding:8px 0 14px;margin:0 0 16px;border-bottom:1px solid var(--line)}
  nav.top-nav a{color:#2563eb;text-decoration:none}
  nav.top-nav a:hover{text-decoration:underline}

  /* ===== 新增：副導覽（錨點） ===== */
  .subnav{display:flex;gap:12px;flex-wrap:wrap;margin:8px 0 16px}
  .chip{padding:8px 12px;border:1px solid var(--line);border-radius:999px;background:#fff}
  .chip a{text-decoration:none;color:#334155}

  /* ===== Hero ===== */
  .hero{background:var(--accent);border:1px solid var(--line);border-radius:24px;padding:24px;margin:8px 0 22px;position:relative}
  .hero h2{font-size:28px;margin:0 0 8px;color:#0f172a}
  .hero p{margin:0 0 14px}
  .hero .actions{display:flex;gap:10px;flex-wrap:wrap}

  /* ===== 亮點 / 功能 ===== */
  .section-title{font-size:18px;margin:18px 0 10px}
  .features{display:grid;gap:12px;margin:0 0 20px}
  @media(min-width:800px){.features{grid-template-columns:repeat(4,1fr)}}
  .feature{background:#ffffff;border:1px solid var(--line);border-radius:16px;padding:14px}
  .feature h4{margin:0 0 6px;font-size:15px}
  .icon{width:34px;height:34px;border-radius:10px;display:grid;place-items:center;margin-bottom:6px;background:linear-gradient(135deg,#fde68a,#fca5a5)}

  /* ===== 三步驟 ===== */
  .steps{display:grid;gap:12px;margin:2px 0 20px}
  @media(min-width:800px){.steps{grid-template-columns:repeat(3,1fr)}}
  .step{background:#fff;border:1px solid var(--line);border-radius:16px;padding:16px}
  .step .num{font-weight:800;color:var(--brand)}

  /* ===== 食譜靈感（卡片） ===== */
  .recipes{display:grid;gap:12px;margin:2px 0 20px}
  @media(min-width:800px){.recipes{grid-template-columns:repeat(3,1fr)}}
  .recipe{background:#fff;border:1px solid var(--line);border-radius:16px;padding:14px}
  .illust{height:120px;border-radius:12px;background:linear-gradient(135deg,#fee2e2,#fce7f3);display:grid;place-items:center;font-size:42px;margin-bottom:10px}

  /* ===== 回饋（兩欄） ===== */
  .testimonials{display:grid;gap:12px;margin:4px 0 20px}
  @media(min-width:800px){.testimonials{grid-template-columns:repeat(2,1fr)}}
  .quote{border-left:3px solid var(--brand);background:#fff;border:1px solid var(--line);padding:12px;border-radius:10px}
  .quote footer{margin-top:6px;color:#64748b}

  /* ===== FAQ ===== */
  details.faq{border:1px solid var(--line);border-radius:12px;padding:10px;background:#fff}
  details.faq + details.faq{margin-top:10px}
  details.faq summary{cursor:pointer;font-weight:600}
</style>

  <!-- 全域錯誤顯示（便於排錯） -->
  <script>
    window.onerror = function(msg, src, line, col) {
      var box = document.getElementById('auth-error');
      if (box) { box.style.display = 'block'; box.textContent = '前端錯誤： ' + msg + ' (' + src + ':' + line + ':' + col + ')'; }
    };
  </script>

  <!-- 雙 CDN：先載 jsDelivr，失敗則切到 unpkg；載入完成後才執行主程式 -->
  <script>
    (function loadSupabaseSDK() {
      var primary = "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.min.js";
      var fallback = "https://unpkg.com/@supabase/supabase-js@2.45.4/dist/umd/supabase.min.js";
      function append(src) {
        var s = document.createElement('script');
        s.src = src; s.defer = true;
        s.onload = function(){ window.__supabaseReady = true; };
        s.onerror = function(){
          if (src === primary) {
            append(fallback);
          } else {
            var el = document.getElementById('auth-error');
            if (el) { el.style.display = 'block'; el.textContent = '載入 Supabase SDK 失敗，請稍後再試（或檢查是否被網路擋住 CDN）。'; }
          }
        };
        document.head.appendChild(s);
      }
      append(primary);
    })();
  </script>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo">QS</div>
      <div>
        <h1>戒糖計畫 Quit Sugar</h1>
        <small class="muted">輕鬆開始、持續記錄、看見改變</small>
      </div>
    </div>
    <div id="auth-quick" class="muted"></div>
  </header>

  <!-- 導覽列（站內頁面） -->
  <nav class="top-nav">
    <a href="./">戒糖首頁</a>
    <a href="./analyzer.html">食物卡路里分析器</a>
  </nav>

  <!-- Hero 區（柔和粉色、清楚 CTA） -->
<section class="hero">
  <h2>你的輕甜生活，從今天開始</h2>
  <p class="muted">友善身體的減糖計畫：不必極端，循序漸進；給自己 8 週，換來更穩定的能量與好心情。</p>
  <div class="actions">
    <a class="btn primary" href="#auth">加入挑戰 / 登入</a>
    <a class="btn" href="./analyzer.html">先試用食物卡路里分析器</a>
  </div>
  <div class="subnav">
    <span class="chip"><a href="#why">為什麼有效</a></span>
    <span class="chip"><a href="#steps">三步驟開始</a></span>
    <span class="chip"><a href="#recipes">食譜靈感</a></span>
    <span class="chip"><a href="#stories">成功故事</a></span>
    <span class="chip"><a href="#faq">FAQ</a></span>
  </div>
</section>

<!-- 四大重點（女性友善語氣） -->
<h3 id="why" class="section-title">為什麼這個方法更溫柔、也更有效？</h3>
<div class="features">
  <div class="feature">
    <div class="icon">💗</div>
    <h4>不必全或無</h4>
    <p class="muted">循序漸進的低糖節奏，搭配替代選擇，壓力更小、成功率更高。</p>
  </div>
  <div class="feature">
    <div class="icon">🥗</div>
    <h4>好吃也能少糖</h4>
    <p class="muted">簡單料理靈感與超市選物建議，日常就能做到。</p>
  </div>
  <div class="feature">
    <div class="icon">🧘‍♀️</div>
    <h4>身心一起照顧</h4>
    <p class="muted">結合睡眠、壓力與簡易運動，讓渴望更好管理。</p>
  </div>
  <div class="feature">
    <div class="icon">📈</div>
    <h4>看得見的成就</h4>
    <p class="muted">用「連勝天數」與「最長紀錄」追蹤進步，超有成就感。</p>
  </div>
</div>

<!-- 三步驟開始 -->
<h3 id="steps" class="section-title">三步驟開始（今天就能做）</h3>
<div class="steps">
  <div class="step"><div class="num">Step 1</div><strong>登入並建立目標</strong><p class="muted">設定你的起始日與小目標，從 1% 改變開始。</p></div>
  <div class="step"><div class="num">Step 2</div><strong>每日 1 個小行動</strong><p class="muted">例如：晚餐不喝含糖飲料，或 20 分鐘散步。</p></div>
  <div class="step"><div class="num">Step 3</div><strong>記錄成就、每週微調</strong><p class="muted">用 streaks 追蹤天數，逐步調整到舒服的節奏。</p></div>
</div>

<!-- 食譜靈感（示意卡片） -->
<h3 id="recipes" class="section-title">本週食譜靈感</h3>
<div class="recipes">
  <div class="recipe"><div class="illust">🥣</div><strong>暖胃燕麥碗</strong><p class="muted">低糖版早餐，甜味來自香蕉與肉桂。</p><a class="btn" href="./analyzer.html">用分析器估卡路里</a></div>
  <div class="recipe"><div class="illust">🥗</div><strong>地中海鮪魚沙拉</strong><p class="muted">高蛋白、高纖維，飽足感更久。</p><a class="btn" href="./analyzer.html">用分析器估卡路里</a></div>
  <div class="recipe"><div class="illust">🍫</div><strong>70% 可可小點</strong><p class="muted">想吃甜時的替代選擇，控制份量就不內疚。</p><a class="btn" href="./analyzer.html">用分析器估卡路里</a></div>
</div>

<!-- 使用者回饋 -->
<h3 id="stories" class="section-title">成功故事</h3>
<div class="testimonials">
  <blockquote class="quote"><p>三週後哭腔下午崩壞消失了，皮膚也穩定許多！</p><footer>— Yumi．設計師</footer></blockquote>
  <blockquote class="quote"><p>用「連勝」看進步，比體重計更激勵；現在甜飲一週只喝一次。</p><footer>— Irene．行銷人</footer></blockquote>
</div>

<!-- FAQ -->
<h3 id="faq" class="section-title">常見問題</h3>
<details class="faq"><summary>一定要 8 週嗎？</summary><p class="muted">建議 8 週作為完整循環；也可依生活節奏調整。</p></details>
<details class="faq"><summary>需要完全不吃糖嗎？</summary><p class="muted">不用極端；我們推「更少糖、少加工」，持續最重要。</p></details>

<div class="grid">
    <!-- 左：內容/激勵 & 代辦 -->
    <section class="card">
      <span class="kicker">基本原則 & 每日激勵</span>
      <h2>今天就開始，先做到 1 件小事</h2>
      <p id="motivation" class="muted">……</p>
      <h3>健康行動清單</h3>
      <div class="list" id="todo-list"></div>
      <div class="row2" style="margin-top:10px">
        <input id="todo-input" placeholder="+ 新增一個今日小行動，例如：晚餐不喝含糖飲料"/>
        <button class="btn" id="todo-add">加入</button>
      </div>
    </section>

    <!-- 右：登入/追蹤 -->
    <section id="auth" class="card">
      <span class="kicker">個人化追蹤</span>
      <h2>註冊 / 登入</h2>
      <div class="row2">
        <input id="signup-email" placeholder="Email（建議手動輸入）" autocomplete="username" />
        <input id="signup-password" placeholder="密碼（至少 6 碼）" type="password" autocomplete="new-password" />
      </div>
      <div class="row2" style="margin-top:8px">
        <button class="btn primary" id="btn-signup">註冊</button>
        <button class="btn" id="btn-login">登入</button>
      </div>
      <div class="row" style="margin-top:8px">
        <button class="btn ghost" id="btn-logout" style="display:none">登出</button>
      </div>
      <div id="auth-error" class="error" style="display:none;margin-top:10px"></div>

      <hr style="margin:16px -18px;border-color:#e5e7eb;border-style:solid;border-width:1px 0 0"/>

      <h3>我的戒糖里程碑</h3>
      <div class="stat">
        <div>
          <div class="muted">當前連勝（天）</div>
          <div class="num" id="current-streak">—</div>
        </div>
        <div>
          <div class="muted">歷史最長（天）</div>
          <div class="num" id="max-streak">—</div>
        </div>
      </div>
      <div class="row2" style="margin-top:12px">
        <button class="btn" id="btn-i-did-good">我今天戒糖 ✅</button>
        <button class="btn danger" id="btn-reset">我失手了，重新開始</button>
      </div>
      <small class="muted">提示：登入後才會寫入/讀取資料表 <code>streaks</code>。</small>
    </section>
  </div>

  <footer>
    <p>© 2025 Quit Sugar. GitHub Pages × Supabase</p>
  </footer>
</div>

<script>
  // ====== 延遲等待 SDK 載入完成 ======
  async function waitSupabaseReady(ms = 4000) {
    const start = Date.now();
    while (!window.supabase && Date.now() - start < ms) {
      await new Promise(r => setTimeout(r, 50));
    }
    return !!window.supabase;
  }

  // ====== UI 小工具 ======
  const $ = (id) => document.getElementById(id);
  const showErr = (msg) => { const box = document.getElementById('auth-error'); if(!box) return; box.style.display = 'block'; box.textContent = msg; };
  const hideErr = () => { const box = document.getElementById('auth-error'); if(!box) return; box.style.display = 'none'; box.textContent = ''; };

  // ====== Email 正規化（避免「Email invalid」） ======
  function normalizeEmail(raw) {
    return (raw ?? '')
      .normalize('NFKC')
      .replace(/[\u200B-\u200D\uFEFF]/g, '')
      .trim();
  }
  function basicEmailOK(s) { return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s); }

  // ====== 激勵語句 ======
  const QUOTES = [
    '少糖一點，清醒多一點。',
    '今天的你，只要比昨天更好 1%。',
    '戒掉不是快狠準，而是持續做小事。',
    '想吃甜的？先喝一杯水，等五分鐘再決定。',
    '把渴望寫下來，讓它離開腦袋。',
  ];
  function pickQuote(){
    const t = QUOTES[Math.floor(Math.random()*QUOTES.length)];
    document.getElementById('motivation').textContent = t;
  }

  // ====== TODO（本地儲存） ======
  const TODO_KEY = 'qs.todos.v1';
  function readTodos(){ try { return JSON.parse(localStorage.getItem(TODO_KEY)) || []; } catch { return []; } }
  function writeTodos(list){ localStorage.setItem(TODO_KEY, JSON.stringify(list)); renderTodos(); }
  function renderTodos(){
    const list = readTodos();
    const wrap = document.getElementById('todo-list');
    wrap.innerHTML='';
    list.forEach((t,i)=>{
      const row = document.createElement('div');
      row.className = 'todo';
      const cb = document.createElement('input'); cb.type='checkbox'; cb.checked = !!t.done; cb.addEventListener('change',()=>{ list[i].done = cb.checked; writeTodos(list); });
      const span = document.createElement('span'); span.textContent = t.text; span.className='muted';
      const del = document.createElement('button'); del.className='btn ghost'; del.textContent='刪除'; del.addEventListener('click',()=>{ list.splice(i,1); writeTodos(list); });
      row.append(cb, span, del);
      wrap.append(row);
    });
  }

  // ====== 主流程 ======
  window.addEventListener('DOMContentLoaded', async () => {
    pickQuote();
    renderTodos();

    // 等待 Supabase SDK
    const ok = await waitSupabaseReady(4000);
    if (!ok) { showErr('Supabase SDK 未載入完成，請重新整理或稍後再試。'); return; }

    // 1) Supabase 連線設定（使用你的專案資訊）
    const SUPABASE_URL = "https://scquprvywjtuvcxxfsco.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNjcXVwcnZ5d2p0dXZjeHhmc2NvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4MzAxMTQsImV4cCI6MjA3MTQwNjExNH0.iUZ_lI-mHoGoz2NfPTifYe44zieUIBUREF6fxsry97I";
    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
      auth: { persistSession: true, autoRefreshToken: true, detectSessionInUrl: false }
    });

    // Auth：註冊 / 登入 / 登出
    async function signup(){
      hideErr();
      const email = normalizeEmail(document.getElementById('signup-email').value);
      const password = document.getElementById('signup-password').value;
      if(!basicEmailOK(email)) return showErr('請輸入有效的 Email（避免全形與多餘空白）');
      if((password||'').length < 6) return showErr('密碼至少 6 碼');
      const { data, error } = await supabaseClient.auth.signUp({ email, password });
      if(error){ return showErr('註冊失敗：' + (error.message || '未知錯誤')); }
      if(!data.session){ return showErr('若啟用信箱驗證，請至信箱收信後再回來按「登入」。'); }
      await afterLogin();
    }

    async function login(){
      hideErr();
      const email = normalizeEmail(document.getElementById('signup-email').value);
      const password = document.getElementById('signup-password').value;
      if(!basicEmailOK(email)) return showErr('請輸入有效的 Email');
      if((password||'').length < 6) return showErr('密碼至少 6 碼');
      const { data, error } = await supabaseClient.auth.signInWithPassword({ email, password });
      if(error){ return showErr('登入失敗：' + (error.message || '未知錯誤')); }
      await afterLogin();
    }

    async function logout(){ await supabaseClient.auth.signOut(); renderSession(null); }

    function renderSession(session){
      const quick = document.getElementById('auth-quick');
      const btnLogout = document.getElementById('btn-logout');
      if(session){
        const email = session.user?.email || '已登入';
        quick.textContent = '👤 ' + email;
        btnLogout.style.display = 'inline-flex';
      }else{
        quick.textContent = '未登入';
        btnLogout.style.display = 'none';
        document.getElementById('current-streak').textContent = '—';
        document.getElementById('max-streak').textContent = '—';
      }
    }

    // Streaks
    function daysBetween(start){
      const s = new Date(start + 'T00:00:00');
      const today = new Date();
      const diff = Math.floor((Date.UTC(today.getFullYear(),today.getMonth(),today.getDate()) - Date.UTC(s.getFullYear(),s.getMonth(),s.getDate())) / (1000*60*60*24));
      return Math.max(0, diff+1);
    }

    async function ensureStreakRow(userId){
      const { data, error } = await supabaseClient.from('streaks').select('*').eq('user_id', userId).maybeSingle();
      if(error){ showErr('讀取 streaks 失敗：' + error.message); return null; }
      if(data){ return data; }
      const today = new Date().toISOString().slice(0,10);
      const { data: inserted, error: e2 } = await supabaseClient.from('streaks').insert({
        user_id: userId,
        current_streak_start_date: today,
        max_streak_days: 0
      }).select().single();
      if(e2){ showErr('建立 streaks 失敗：' + e2.message); return null; }
      return inserted;
    }

    async function refreshStreaks(){
      const { data: { session } } = await supabaseClient.auth.getSession();
      if(!session){ return; }
      const row = await ensureStreakRow(session.user.id);
      if(!row) return;
      const current = daysBetween(row.current_streak_start_date);
      document.getElementById('current-streak').textContent = current;
      document.getElementById('max-streak').textContent = row.max_streak_days ?? 0;
    }

    async function markGoodToday(){
      const { data: { session } } = await supabaseClient.auth.getSession();
      if(!session) return showErr('請先登入');
      const row = await ensureStreakRow(session.user.id);
      if(!row) return;
      const current = daysBetween(row.current_streak_start_date);
      const newMax = Math.max(row.max_streak_days ?? 0, current);
      const { error } = await supabaseClient.from('streaks').update({ max_streak_days: newMax }).eq('user_id', session.user.id);
      if(error) return showErr('更新失敗：' + error.message);
      await refreshStreaks();
    }

    async function resetStreak(){
      const { data: { session } } = await supabaseClient.auth.getSession();
      if(!session) return showErr('請先登入');
      const today = new Date().toISOString().slice(0,10);
      const { error } = await supabaseClient.from('streaks').update({ current_streak_start_date: today }).eq('user_id', session.user.id);
      if(error) return showErr('重置失敗：' + error.message);
      await refreshStreaks();
    }

    async function afterLogin(){
      const { data: { session } } = await supabaseClient.auth.getSession();
      renderSession(session);
      await refreshStreaks();
    }

    // 綁定事件
    document.getElementById('todo-add').addEventListener('click', ()=>{
      const v = document.getElementById('todo-input').value.trim();
      if(!v) return;
      const list = readTodos();
      list.unshift({ text:v, done:false });
      writeTodos(list);
      document.getElementById('todo-input').value = '';
    });
    document.getElementById('btn-signup').addEventListener('click', signup);
    document.getElementById('btn-login').addEventListener('click', login);
    document.getElementById('btn-logout').addEventListener('click', logout);
    document.getElementById('btn-i-did-good').addEventListener('click', markGoodToday);
    document.getElementById('btn-reset').addEventListener('click', resetStreak);

    // Session 初始化
    const { data: { session } } = await supabaseClient.auth.getSession();
    renderSession(session);
    if(session){ await refreshStreaks(); }

    // 監聽登入狀態
    supabaseClient.auth.onAuthStateChange(function(_evt, sess){ renderSession(sess); if(sess){ refreshStreaks(); } });
  });
</script>

<!-- 後端一次性設定備忘（Supabase）
1) Auth → Providers → Email：啟用。
   測試期可在 Auth → Email 關閉 Confirm email。
2) Auth → URL Configuration：
   Site URL/Redirect URL 都填：https://abbby9377.github.io/quit-sugar-site/
3) 建表與 RLS（若未建）：在 SQL Editor 執行：

  create table if not exists public.streaks (
    id bigint generated by default as identity primary key,
    created_at timestamp with time zone default now(),
    user_id uuid not null default auth.uid() references auth.users(id) on delete cascade,
    current_streak_start_date date not null,
    max_streak_days bigint not null default 0
  );
  alter table public.streaks enable row level security;
  drop policy if exists "streaks_select_own" on public.streaks;
  create policy "streaks_select_own" on public.streaks for select to authenticated using (user_id = auth.uid());
  drop policy if exists "streaks_insert_self" on public.streaks;
  create policy "streaks_insert_self" on public.streaks for insert to authenticated with check (user_id = auth.uid());
  drop policy if exists "streaks_update_own" on public.streaks;
  create policy "streaks_update_own" on public.streaks for update to authenticated using (user_id = auth.uid()) with check (user_id = auth.uid());
  drop policy if exists "streaks_delete_own" on public.streaks;
  create policy "streaks_delete_own" on public.streaks for delete to authenticated using (user_id = auth.uid());
-->
</body>
</html>
